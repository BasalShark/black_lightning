<% content_for :head do %>
  <meta name="templates-base-url" content="/admin/proposals/call_question_templates" />
  <%= javascript_include_tag "admin/question_templates.js" %>
<% end %>

<%= simple_nested_form_for(@admin_proposals_call) do |f| %>
  <%= f.error_notification %>

  <div class="form-inputs">

    <%= f.input :deadline %>

    <%= f.input :name %>

    <div class="control-group">
      <%= f.label :open %>

      <div class="controls switch" data-on="success" data-on-label="Open" data-off="danger" data-off-label="Closed" style="width: 150px;">
        <%=
           f.input_field :open,
                          boolean_style: :inline
        %>
      </div>
    </div>

    <h3>Questions</h3>

    <%= f.simple_fields_for :questions %>

    <%= f.link_to_add "Add Question", :questions, :class => "btn" %>

  </div>

  <div class="form-actions">
    <%= f.button :submit, :class => "btn-primary" %>
    <a href="#template_modal" role="button" class="btn" data-toggle="modal">Load Template</a>
    <%= link_to 'Back', admin_proposals_calls_path, :class => "btn" %>
  </div>
<% end %>

<%= render '/shared/form/template_modal', header: 'Select Questions from Template', template_model: Admin::Proposals::CallQuestionTemplate %>