<% content_for :head do %>
  <meta name="templates-base-url" content="/admin/questionnaires/questionnaire_templates" />
  <%= javascript_include_tag "admin/question_templates.js" %>
<% end %>

<%= simple_nested_form_for(@admin_questionnaires_questionnaire) do |f| %>
  <%= f.error_notification %>

  <div class="form-inputs">

    <%= f.input :name %>

    <h3>Questions</h3>

    <%= f.simple_fields_for :questions %>

    <% add_text = '<i class="icon-plus"></i> Add Question'.html_safe %>
    <%= f.link_to_add add_text, :questions, :class => "btn" %>

  </div>

  <div class="form-actions">
    <%= f.button :submit, :class => "btn-primary" %>
    <a href="#template_modal" role="button" class="btn" data-toggle="modal">Load Template</a>
    <%= link_to 'Back', admin_questionnaires_questionnaires_path, :class => "btn" %>
  </div>
<% end %>

<%= render '/shared/form/template_modal', header: 'Select Questions from Template', template_model: Admin::Questionnaires::QuestionnaireTemplate %>