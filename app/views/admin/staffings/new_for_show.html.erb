<%= simple_nested_form_for(@admin_staffing, :url => {:action => 'create_for_show'}, :method => 'put') do |f| %>
  <%= f.error_notification %>

  <div class="form-inputs">
      
    <%= f.input :show_title %>
    
    <div id="dates_container" class="well form-horizontal">
      <h3>Dates</h3>
      <script type="text/javascript">
        $(function () {
          var counter = 0;
          $('#add_date').click(function () {
            var item = $('#date_blueprint').clone();
            $(item).show();
            //TODO: This feels like a bit of a cheat - could probably be improved.
            item.find('select[name*="day"]').attr('name', 'dates[' + counter + '][day]');
            item.find('select[name*="month"]').attr('name', 'dates[' + counter + '][month]');
            item.find('select[name*="year"]').attr('name', 'dates[' + counter + '][year]');
            item.find('select[name*="hour"]').attr('name', 'dates[' + counter + '][hour]');
            item.find('select[name*="minute"]').attr('name', 'dates[' + counter + '][minute]');
            item.find('a').click(function () {
              $(item).remove();
            });
            counter ++;
            
            $('#add_date').before(item);
          });
        });
      </script>
      <a id="add_date" class="btn">Add Date</a>
    </div>
     
    <div class="well form-horizontal">
      <h3>Jobs</h3>
      <%= f.simple_fields_for :staffing_jobs %>
      
      <% if can? :write, @staffing %>
      <%= f.link_to_add "Add Job", :staffing_jobs, :class => "btn" %>
      </div>
    <% end %>
  </div>

  <div class="form-actions">
    <%= f.button :submit, :class => 'btn-primary' %>
    <%= link_to 'Cancel', admin_staffings_path, :class => "btn" %>
  </div>
<% end %>

<div id="date_blueprint" style="display: none" class="control-group datetime">
  <%= select_datetime %>
  <a class="btn btn-danger">Remove</a>
</div>
