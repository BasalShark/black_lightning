<% content_for :head do %>
  <%= javascript_include_tag "admin/users" %>
<% end %>

<h1><%= @title %></h1>

<div id="search_container">
  <%= search_form_for @q, builder: SimpleForm::FormBuilder, url: :admin_users, html: { id: "search", class: "form-search form-inline" } do |f| %>
    <%= f.input_field :full_name_cont, placeholder: "Name",  required: false %>
    <%= f.input_field :email_cont,     placeholder: "Email", required: false %>

    <%= f.input :show_non_members, label: "Show Non-Members", input_html: { id: "show_non_members", checked: params[:show_non_members] == "1" ? true : false, name: "show_non_members" }, as: :boolean %>
    
    <%= submit_tag "Search", class: 'btn' %>
  <% end %>
</div>

<table class="table">
    <tbody>
        <tr>
            <th>Name</th>
            <th>Email</th>

            <% if can? :edit, User%>
              <th></th>
            <% end %>
            <% if can? :delete, User%>
              <th></th>
            <% end %>
        </tr>
        <% @users.each do |user| %>
          <tr>
            <td><%= user_link(user, true) %></td>
            <td><%= user.email %></td>
              

            <%= get_link user, :edit, wrap_tag: 'td' %>

            <%= get_link user, :destroy, wrap_tag: 'td',
                         confirm:         "Deleting #{user.name(current_user)}",
                         detail:          "If you delete a user, you may also break content which belongs to them. Do not take this decision lightly.<br />Please type the user's full name:",
                         type_confirm:     user.name(current_user)
            %>
          </tr>
        <% end %>
    </tbody>
</table>

<div class="paginate_holder">
  <%= will_paginate(@users) %>
</div>

<%= get_link User, :new %>