<h1><%= @title %></h1>

<% # BOOTSTRAP: Might need some additional form rework? %>

<p>
  <%= display_block("Registration Help", false) %>
</p>

<%= simple_form_for(@user, method: :patch, url: submit_membership_activation_token_path(@membership_activation_token)) do |f| %>
  <%= f.error_notification %>

  <% unless @user.persisted? %>
    <p>If you already have an account, please sign in instead of completing this form twice. If you have problems signing in, please contact the Secretary at <a href="mailto:secretary@bedlamtheatre.co.uk">secretary@bedlamtheatre.co.uk</a></p>
  <% end %>

  <div class="form-inputs">
    <%= f.input :email, required: true, autofocus: true %>

    <%= f.input :first_name, required: true %>
    <%= f.input :last_name, required: true %>

    <%= f.input :phone_number, hint: 'It is not mandatory to enter your phone number. A phone number is only required once you want to sign up for staffing slots.' %>

    <% unless @user.persisted? %>
      <%= f.input :password, required: true %>
      <%= f.input :password_confirmation, required: true %>
    <% end %>

    <h3>Profile</h3>

    <p>A bio and avatar are not mandatory, but these will be shown on your profile if you enter them.</p>
    <%= f.input :bio %>
    <%= render 'shared/form/file_field', f: f, field_name: :avatar %>

    <div div class="control-group">
      <%= f.label "User Profile" %>

      <div class="controls switch" data-on="success" data-on-label="Public" data-off="danger" data-off-label="Private" style="width: 200px;">
        <%= f.input_field :public_profile, boolean_style: :inline %>
      </div>
    </div>
  </div>

  <%= render 'shared/consent' %>

  <p>After activating your account, you will be redirected to the sign-in page.</p>

  <div class="form-actions mb-3">
    <% button_text = @user.persisted? ? 'Reactivate Membership' : 'Activate Membership' %>
    <%= f.button :submit, button_text, class: 'btn btn-primary' %>
  </div>
<% end %>