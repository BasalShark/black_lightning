<% # BOOTSTRAP CHECK: Currently unused. %>
<% url = '/' + controller_path if url.nil? %>

  <%= search_form_for @q, builder: SimpleForm::FormBuilder, url: url, 
  wrapper: :inline_form,
  html: { class: "row row-cols-lg-auto g-3 align-items-center search" },
  wrapper_mappings: {
    boolean: :inline_boolean
  } do |f| %>
  
    <% input_fields.each do |key, params| %>
    <% if params.key?(:label) %>
    <% label = params[:label] %>
    <% elsif params.key?(:slug) %>
    <% label = t("simple_form.labels.#{params[:slug]}") %>
    <% else %>
    <% label = key.to_s.humanize %>
    <% end %>

    <% params[:label] = label %>

    <% if params.key?(:type) && params[:type] != :text %>
    <% if params[:type] == :boolean %>
    <% # If it is a boolean, just render the boolean field and continue the loop. %>
    <%= render 'shared/boolean_search_form_field', f: f, name: key, label: params.fetch(:label, key.to_s.humanize) %>
    <% next %>
    <% elsif params[:type] == :select %>
    <% params[:include_blank] = true %>
    <%= f.select key, params[:choices], params %>
    <% next %>
    <% end %>
    <% else %>
    <% # If there is no key, text is implied. %>
    <% if params.key?(:slug) %>
    <% params.merge!({ label: false, placeholder: label }) %>
    <% end %>
    <% end %>

    <% params = params.except!([:type, :slug]) %>
    <div style="padding-right: 0.5rem;">
    <%= f.input key, params %>
</div>
    <% end %>
        <div style="padding-right: 0.5rem;">
 <%= button_tag type: 'submit', class: "btn btn-secondary" do %>
      <i class="fas fa-search" aria-hidden="true"></i>
  <% end %>
    </div>
    <% end %>